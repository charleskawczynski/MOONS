\documentclass[11pt]{article}
\usepackage{graphicx}    % needed for including graphics e.g. EPS, PS
\usepackage{epstopdf}
\usepackage{amsmath}
\usepackage{hyperref}
\usepackage{xspace}
\usepackage{mathtools}
\usepackage{tikz}
\usepackage{epsfig}
\usepackage{float}
\usepackage{natbib}
\usepackage{subfigure}
\usepackage{setspace}
\usepackage{tabularx,ragged2e,booktabs,caption}


\setlength{\oddsidemargin}{0.1in}
\setlength{\textwidth}{7.25in}

\setlength{\topmargin}{-1in}     %\topmargin: gap above header
\setlength{\headheight}{0in}     %\headheight: height of header
\setlength{\topskip}{0in}        %\topskip: between header and text
\setlength{\headsep}{0in}        
\setlength{\textheight}{692pt}   %\textheight: height of main text
\setlength{\textwidth}{7.5in}    % \textwidth: width of text
\setlength{\oddsidemargin}{-0.5in}  % \oddsidemargin: odd page left margin
\setlength{\evensidemargin}{0in} %\evensidemargin : even page left margin
\setlength{\parindent}{0.25in}   %\parindent: indentation of paragraphs
\setlength{\parskip}{0pt}        %\parskip: gap between paragraphs
\setlength{\voffset}{0.5in}


% Useful commands:

% \hfill		aligns-right everything right of \hfill

\begin{document}
\doublespacing
\title{Magnetohydrodynamic Object-Oriented Numerical Solver (MOONS)}
\author{C. Kawczynski \\
Department of Mechanical and Aerospace Engineering \\
University of California Los Angeles, USA\\
}
\maketitle

\section{Document Rules}
In order to keep this document organized
\begin{itemize}
\item Refer to this document for 1 hour each morning to asses priorities
\item Keep fewer than 5 items in Goals and Requirements / Today / Tomorrow
\item Keep fewer than 10 sections total in this document
\end{itemize}

\section{Goals / Requirements}

\begin{itemize}
\item Investigate validity of pseudo-vacuum BCs compared with true vacuum BCs
	\begin{itemize}
	\item Read papers on coupling fluid and vacuum domains
	\item Develop Jacobi-solver for curl-curl operator
	\item Develop CG-solver
	\item Read papers / start writing
	\end{itemize}
\item Finite $Re_m$ Shercliff/Hunt flows
	\begin{itemize}
	\item Read papers
	\end{itemize}
\item Mimicking plasma disruption
	\begin{itemize}
	\item Read papers
	\end{itemize}
\end{itemize}


\section{Today}

- Look into why SS CG is not the same between 5 and 10 iterations per time step.

- Write up slides for Sergey for his trip to Germany. 3-5 compact slides of work in progress and conclusions (some of which mentioned in latest progress report PPT). Sergey's trip is February 6th (need the slides at least one week prior for review). Include 3D LDC finite $Re_m$ magnetic field lines.

- CG/PCG restart capability and new stopping criteria

- Try cleaning procedure with $\mathbf{B}_{tangent}=0$ and $\frac{\partial \phi}{\partial n} = \nabla \bullet \mathbf{B}^*$ and see if cleaning works. This might be equivalent to Pseudo vacuum. Also, look into paper / source that discussed this.

- Ask Sergey again about how to show cleaning procedure benchmark with LDC problem with random seed field

- Clean up momentumSolver.f90 and inductionSolver.f90

- Clean up ops\_interp.f90

- Re-run BC sim

- Read Moreau book about energy transfer

- Search the literature on EM boundary conditions

- Slides for Gautam for 237D - Parker sims, $Re_m=10^{-3}, 1, 100$ (Movies)

- Eventually, the lap\_centered routine should be replaced by a allocation-less one. This will be complicated though because this may require changing the matrix-free operators interface. A better, more general solution may be needed.

- Eventually, checks of face/node/CC/edge data could be made in routines like advect\_B and advect\_U, which could help prevent searching for what is a incorrectly located variable into a subroutine that results in a interpolation or del failure.

\section{Tomorrow}

- Documentation for benchmark cases (methodology, format, execution)

- Decide on format of input file (what parameters will be set in input file and what will be coded)

- Look to improve performance of apply\_edges

- Consider new organization of solver folder

- Continue fixing file names and folder names for better organization

- Consider/try making solvers (momentum/induction) functional instead of OO.

- Read plasma papers

- First step of SK flow is descriptive - phases (linear, non-linear, decay)

- Read literature for interface conditions BCs for bfield

\section{Future Plans}

- Make a coordinates / grid import and corresponding corrections to the readme routines in the IO files.

- Try performing refinement on 2D flow

- Look at KE equation and Bfield energy equation

- Figure out how to view time in tecplot as simulation runs

- Naming convention for all ops should be (Real,SF,VF) = (real(cp),scalarField,vectorField)

- Convert matlab to python.

- Make a python routine to compute the number of lines in MOONS

- Make a prepare directory routine in MOONS

- Make Poisson solvers (all) initialized outside of the call routine and look into benchmarking these solvers by looking at convergence rates

- Introduce staggered B so it can be cleaned and test cleaning procedure and compare with CT method

- Consider making setXMinType(1,2) for dirichlet / neumann and determine wall coincident / incoincident internally.

- Make a uniform grid option for boundary layers (maybe make a function for this)

- Implement Newtons method for estimating betaw. Check if betai/betaw
are above 1000, if so just use uniform grid.

- Profile to find latest bottle necks

- Look into how expensive shape() is.

- Calculate cw in induction solver!

- Try out pre-processor directive '-ftree -parallelize -loops=n' = split loops into n-threads

- Look into different forms of $\mathbf{j}\times \mathbf{B}$, for example 
decomposing into $\mathbf{j}\times \mathbf{B} = (\mathbf{B}\bullet\nabla) \left(\frac{\mathbf{B}}{\mu}\right) - \nabla \left( \frac{\mathbf{B}^2}{2\mu} \right)$ where the second term is the magnetic pressure

\section{Futuristic Plans}

Dimensionless parameters to add:

Elsasser number = ration of lorentz to coriolis forces = A = sigma B\^2 / (2 rho Omega)

Ra = t\_k t\_nu / t\_f\^2

Where t\_f is the free fall time = sqrt(H/(alpha g dT))

Q = Chandrasekhar number = ratio of magneto-viscous diffusion time scales and the square of the alfven speed crossing time
 = t\_eta t\_nu / t\_A\^2

Eckmann number = ratio of rotation time to diffusion time
 = t\_Omega / t\_nu = nu / (2 Omega H\^2)


Convective Reynolds number = Re\_c = t\_nu / t\_f

- Try changing smoother to Jacobi and check convergence rate (including when coarsest level is \textit{very} coarse)

- Check Non-uniform N/CC data grids for D/N BCs

- Try Jack's Experiment

- Fix Time module: export and import time so that the average can be appropriately
printed to the screen.

- Consider making applyFaceBCs, applyEdgeBCs, applyCornerBCs and interpolate appropriately. This seems like the most general and care-free approach. At least implement the capability, and offer for using applyFaceBCs in a non-arbitrary order.

- Implement an upwind scheme for the non-uniform grid.

- Make pressure term 2nd order accurate in time (trap)

- Make advection term 2nd order accurate in time (AB2)

- Test ADI for LDC case

- Right now, there are many things that will (likely) break when MOONS tries to restart a simulation. Restarting may require manual overrides on certain things, so generalizing restart for many modules is difficult.

- Consider different time marching method (RK4 - eldredge)

- Consider re-formulating using conservative higher order finite difference methods by Moin

- Consider using pre-processor directives instead of if statements, this needs to be organized on a large level.

- Get 3D douglas ADI working for fixed time step

- Get 3D douglas ADI working for non-uniform grids

- Get 3D douglas ADI working for variable $\alpha$

- Look into Kolmogorov scale for LDC and try DNS

- Make a BMC for a purely hydrodynamic turbulent flow (Re=2,000 and 3,200 compare with literature)

- Consider making an obstacle module that allows for more complex flows
e.g. flow over a sphere

- Consider making an obstacle module that is passed into the solver.
This could assign the velocity to satisfy any desired BCs and internal
velocity (likely u=0 inside). More tests could be done this way.

- implement: 1) chimney flow 2) impinging jet flow

- test the cylinder driven flow case

- Finish developing solverSettings estimateRemaining() subroutine

- Allow for compressibility!

- Use higher order spatial operators! (stencils.f90 / interpOps.f90 / applyBCs.f90)

- Use hgiher order time marching methods! (RK4 maybe?)

- Update export: make a switch to control what to export:
      U-field: (face, cc, node)\_interior (face, cc, node)\_total domain
      B-field: (face, cc, node)\_interior (face, cc, node)\_total domain
      J-field: (face, cc, node)\_interior (face, cc, node)\_total domain

\section{10 minute tasks}
- Update matlab script to plot KU and KB


\section{Analysis and Literature}
- Paper by Priede - Linear stability on Hunt flow ("not easy")

- Work on analysis for simple PD

- Read thesis sent by Naveen

\section{Unsorted}

- CG

- Stencils

- KE/ME equation terms

- Re-run several benchmark tests.

- Try making properties of mom/ind/nrg private!

- Remove unecessary sigma fields

- Finish documentation: non-uniform grid stencils/outline of results: develop a python script to solve the system symbollically.

- Look into Paul Roberts (UCLA)

- Fix the explicit Neumann BCs in apply BCs. It looks like only 1st or 2nd order accuracy is capable for du/dn = 0

- Right now there are two instances of restartU and restartB, this inconsistency must to be resolved.

- Re-run Hunt/Shercliff flows with uniform grid in BL and with p = 0 at outlet

- Update documentation for stencils (include ghost node)

- Maybe include documentation on Nin,Nice,Nici?

- Try comparing 1/Ha with cw for HIMAG vs MOONS and compare continuity of tangent(j)/sigma across interface

- IMPORTANT: del.f90 has no safe way to assign the output when pad is present. This is VERY dangerous and needs to be addressed immediately!

- For Poisson solver, check if mean(f) or mean(f\_interior) must = 0

- Member of committee for Naveen was in Geo-physics, Jonathon "Arnaud"? Look online about him and maybe we can collaborate.

\end{document}